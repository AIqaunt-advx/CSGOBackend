# 爬虫配置说明

## 🕷️ 当前爬虫频率设置

为了避免对目标服务器造成过大压力，我们调整了爬虫的请求频率：

### ⏰ 时间间隔设置

- **爬取间隔**: `7200秒` (2小时) - 每2小时执行一次完整爬取
- **请求间隔**: `5.0秒` - 每个API请求之间等待5秒
- **组间延迟**: `8秒` - 每组物品处理完后等待8秒

### 📊 批处理设置

- **批处理大小**: `10` - 每次处理10个物品
- **分组大小**: `5` - 每组并发请求5个物品详情
- **页数限制**: `10页` - 最多爬取10页市场数据

### 🎯 友好爬取策略

1. **减少并发**: 每组只处理5个物品，避免同时发送太多请求
2. **增加延迟**: 组间等待8秒，请求间等待5秒
3. **限制范围**: 只爬取前10页数据，避免过度请求
4. **错误处理**: API失败时生成模拟数据，避免重复请求

### 📈 数据收集效率

- **每次爬取**: 约50-100个物品详情
- **数据更新**: 每2小时更新一次
- **存储策略**: 保留7天历史数据
- **容错机制**: API失败时使用模拟数据

### ⚙️ 自定义配置

如需调整频率，可以修改 `.env` 文件中的配置：

```env
# 爬虫配置
CRAWLER_INTERVAL=7200              # 爬取间隔（秒）
CRAWLER_DELAY_BETWEEN_REQUESTS=5.0 # 请求间隔（秒）
CRAWLER_BATCH_SIZE=10              # 批处理大小
```

### 🚦 启动建议

```bash
# 启动服务器和爬虫
uv run cli.py server --with-crawler

# 查看爬虫状态
uv run cli.py crawler status

# 手动触发一次爬取（测试用）
uv run cli.py crawler start
```

这样的配置既能保证数据的及时性，又能避免对目标服务器造成过大压力。